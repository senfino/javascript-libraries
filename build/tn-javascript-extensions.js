!function(a){function b(b){var c,d,e,f=b.split(".");for(e=a,c=0;d=f[c];c++)e[d]||(e[d]={}),e=e[d];return e}b("com.gottocode").getNamespace=b}(window),function(a){"use strict";function b(){for(var a,b,c=arguments,d=1,e=c[0];d<c.length;d++){a=c[d];for(b in a)e[b]=a[b],j}}a("com.gottocode").extend=b}(window.com.gottocode.getNamespace),function(a){function b(a){var b={detectionType:"device"};this._options=this._merge(b,a),this._viewportHeight=null,this._viewportWidth=null,this._viewportIdentifier=null,this._callbacks={},this.updateViewportSize()}b.prototype._merge=function(a,b){var c;for(c in b)a[c]=b[c];return a},b.prototype.on=function(a,b){this._callbacks[a]=this._callbacks[a]||[],-1==this._callbacks[a].indexOf(b)&&this._callbacks[a].push(b)},b.prototype._notify=function(a){var b=Array.prototype.slice.call(arguments,1);this._callbacks[a]&&this._callbacks[a].forEach(function(a){a.apply(null,b)})},b.prototype._onResize=function(){this.updateViewportSize()},b.prototype.resize=function(){this.updateViewportSize()},b.prototype.getViewportIdentifier=function(){return this._viewportIdentifier},b.prototype._identifyByBrowserDimensions=function(){{var a,b=window.innerWidth;window.innerHeight}return a=768>b?"phone":980>b?"tablet-portrait":1280>b?"tablet-landscape":"desktop"},b.prototype._identifyByScreenDimensions=function(){{var a,b=screen.width;screen.height}return a=768>b?"phone":980>b?"tablet-portrait":1280>b?"tablet-landscape":"desktop"},b.prototype._identifyByDeviceAgent=function(){var a;return a=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?/Mobile/i.test(navigator.userAgent)&&!/ipad/i.test(navigator.userAgent)?"phone":"tablet":null},b.prototype.updateViewportSize=function(){var a,b=this._options.detectionType,c=window.innerWidth,d=window.innerHeight;if("screen"===b)a=this._identifyByScreenDimensions();else if("browser"===b)a=this._identifyByBrowserDimensions();else{if("device"!==b)throw new Error("detectionType not recognized: "+b);var e=this._identifyByDeviceAgent(),f=this._identifyByScreenDimensions();a=null===e?f:"desktop"!==f?f:"tablet"===e?"tablet-landscape":"desktop"}(this._viewportWidth!==c||this._viewportHeight!==d)&&(this._viewportWidth=c,this._viewportHeight=d,this._notify("resize",c,d)),this._viewportIdentifier!==a&&(this._viewportIdentifier=a,this._notify("viewportIdentifierChange",a))},b.prototype.getViewportSize=function(){return{height:this._viewportHeight,width:this._viewportWidth}},b.prototype.watchStart=function(){window.addEventListener("resize",this._onResize.bind(this))},a("com.gottocode").ViewportIdentifier=b}(window.com.gottocode.getNamespace),function(a){"use strict";function b(){this._listeners={}}b.prototype._notify=function(a){var b,c,d=this._listeners[a],e=Array.prototype.split.call(arguments,1);if(d)for(c=0;c<d.length;c++)b=d[c],b.oneTime&&this._removeListenerByIndex(a,c),listener.apply(null,e)},b.prototype._removeListenerByIndex=function(a,b){this._listeners[a].splice(b,1)},b.prototype._addListenerInformation=function(a,b){this._listeners[a]=this._listeners[a]||[],this.isAlreadyAttached(a,b)||this._listeners[a].push(b)},b.prototype.on=function(a,b){this._addListenerInformation(a,{callback:b,oneTime:!1})},b.prototype._getListenerInformationIndex=function(a,b){for(var c=0,d=null,e=this._listeners[a]||[];c<e.length&&null===d;)e[c].callback===b?d=c:c++;return d},b.prototype.isAlreadyAttached=function(a,b){var c,d=0,e=this._listeners[a],f=!1;if(!e)return!1;for(;d<e.length&&!f;)c=e[d],c.callback===b?f=!0:d++;return f},b.prototype.one=function(a,b){this._addListenerInformation(a,{callback:b,oneTime:!0})},b.prototype.off=function(a,b){var c;this._listeners[a]&&("undefined"==typeof b?delete this._listeners[a]:(c=this._getListenerInformationIndex(a,b),null!==c&&this._removeListenerByIndex(a,c),this._listeners[a].length||delete this._listeners[a]))},a("com.gottocode").EventDispatcher=b}(window.com.gottocode.getNamespace),function(a,b){"use strict";function c(){this._eventDispatcher=new b,this._loadedImagesInformation=[],this._loadingImages=[]}c.prototype.one=function(){this._eventDispatcher.one.apply(this._eventDispatcher,arguments)},c.prototype.on=function(){this._eventDispatcher.on.apply(this._eventDispatcher,arguments)},c.prototype.off=function(){this._eventDispatcher.off.apply(this._eventDispatcher,arguments)},c.prototype.isAlreadyAttached=function(){return this._eventDispatcher.isAlreadyAttached.apply(this._eventDispatcher,arguments)},c.prototype._notify=function(){this._eventDispatcher._notify.apply(this._eventDispatcher,arguments)},c.prototype._onImageLoadDone=function(a){var b=a.height,c=a.width,d={width:c,height:b,url:a.src};this._removeLoadingImage(a),this._notify("imageLoadDone",d),this._loadedImagesInformation.push(d),0===this._loadingImages.length&&this._notify("allImagesLoadDone")},c.prototype._removeLoadingImage=function(a){var b=this._loadingImages.indexOf(a);this._loadingImages.splice(b,1)},c.prototype._onImageLoadFail=function(a){this._removeLoadingImage(a),0===this._loadingImages.length&&this._notify("allImagesLoadDone"),this._notify("imageLoadFail",{url:a.src})},c.prototype.getLoadedInformation=function(a){for(var b=null,c=0;c<this._loadedImagesInformation.length&&null===b;)this._loadedImagesInformation[c].url===a&&null===b?b=this._loadedImagesInformation[c]:c++;return b},c.prototype.load=function(a){var b,c;return c=this.getLoadedInformation(),null!==c?c:(b=document.createElement("img"),b.onload=function(){this._onImageLoadDone(b)}.bind(this),b.onerror=function(){this._onImageLoadFail(b)}.bind(this),this._loadingImages.push(b),b.src=a,void 0)},a("com.gottocode").BulkImageLoader=c}(window.com.gottocode.getNamespace,window.com.gottocode.EventDispatcher);
//# sourceMappingURL=tn-javascript-extensions.js.map